<main class="auth-shell">
  <section class="auth-card">
    <header>
      <p class="auth-eyebrow"><%= t("sessions.new.eyebrow") %></p>
      <h1><%= t("sessions.new.title") %></h1>
      <p class="auth-subtitle"><%= t("sessions.new.subtitle") %></p>
    </header>

    <%= form_with url: session_path, class: "auth-form" do |form| %>
      <div class="field">
        <%= form.label :tenant_slug, t("sessions.new.fields.tenant_slug.label") %>
        <%= form.text_field :tenant_slug, required: true, autofocus: true, autocomplete: "organization", placeholder: "ex: hospital-alpha", value: params[:tenant_slug] %>
      </div>

      <div class="field">
        <%= form.label :email_address, t("sessions.new.fields.email_address.label") %>
        <%= form.email_field :email_address, required: true, autocomplete: "username", placeholder: "voce@empresa.com.br", value: params[:email_address] %>
      </div>

      <div class="field">
        <%= form.label :password, t("sessions.new.fields.password.label") %>
        <%= form.password_field :password, required: true, autocomplete: "current-password", placeholder: "Digite sua senha", maxlength: 72 %>
      </div>

      <div class="field">
        <%= form.label :otp_code, t("sessions.new.fields.otp_code.label") %>
        <%= form.text_field :otp_code, autocomplete: "one-time-code", inputmode: "numeric", placeholder: "000000" %>
      </div>

      <%= form.submit t("sessions.new.actions.submit"), class: "button button-primary" %>
    <% end %>

    <p class="auth-secondary-link"><%= link_to t("sessions.new.actions.forgot_password"), new_password_path(tenant_slug: params[:tenant_slug]) %></p>
  </section>

  <% if ActiveModel::Type::Boolean.new.cast(ENV["SHOW_DEMO_CREDENTIALS"]) %>
    <aside class="demo-card">
      <h2><%= t("sessions.new.demo.title") %></h2>
      <p><%= t("sessions.new.demo.subtitle") %></p>
      <ul class="demo-credentials">
        <li>
          <h3><%= t("sessions.new.demo.roles.hospital_org") %></h3>
          <p><code><%= t("sessions.new.demo.users.hospital_org") %></code></p>
        </li>
        <li>
          <h3><%= t("sessions.new.demo.roles.hospital_unit") %></h3>
          <p><code><%= t("sessions.new.demo.users.hospital_unit") %></code></p>
        </li>
        <li>
          <h3><%= t("sessions.new.demo.roles.supplier") %></h3>
          <p><code><%= t("sessions.new.demo.users.supplier") %></code></p>
        </li>
        <li>
          <h3><%= t("sessions.new.demo.roles.physician") %></h3>
          <p><code><%= t("sessions.new.demo.users.physician") %></code></p>
        </li>
        <li>
          <h3><%= t("sessions.new.demo.roles.fdic") %></h3>
          <p><code><%= t("sessions.new.demo.users.fdic") %></code></p>
        </li>
      </ul>
      <p class="demo-password"><%= t("sessions.new.demo.password_hint") %> <code><%= ENV.fetch("DEMO_SEED_PASSWORD", "configure DEMO_SEED_PASSWORD") %></code></p>
    </aside>
  <% end %>
</main>
